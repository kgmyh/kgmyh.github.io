I"ü*<p>ì¥ê³  í”„ë¡œì íŠ¸ root ê²½ë¡œì— ì˜ì¡´ì„± ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip freeze &gt; requirements.txt   
</code></pre></div></div>

<h1 id="heading-í•„ìš”-ëª¨ë“ˆ-ì„¤ì¹˜">í•„ìš” ëª¨ë“ˆ ì„¤ì¹˜</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get upgrade
<span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential
<span class="nb">sudo </span>apt-get <span class="nb">install </span>python3    
<span class="nb">sudo </span>apt-get <span class="nb">install </span>python3-pip
</code></pre></div></div>

<h1 id="heading-project-directory-ë§Œë“¤ê¸°">project directory ë§Œë“¤ê¸°</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>project 
<span class="nb">cd </span>project 
</code></pre></div></div>

<h1 id="heading-git-hub-ì¥ê³ -í”„ë¡œì íŠ¸-clone-ë°›ê¸°">git hub ì¥ê³  í”„ë¡œì íŠ¸ clone ë°›ê¸°</h1>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone url
</code></pre></div></div>

<h1 id="heading-ê°€ìƒí™˜ê²½-ìƒì„±-ë°-ë¼ì´ë¸ŒëŸ¬ë¦¬-ì„¤ì¹˜">ê°€ìƒí™˜ê²½ ìƒì„± ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>virtualenv
virtualenv <span class="nt">-p</span> python3 venv
<span class="nb">source </span>venv/bin/activate  <span class="o">(</span>í™œì„±í™”<span class="o">)</span>

pip <span class="nb">install</span> <span class="nt">-r</span> django-board/requirements.txt
</code></pre></div></div>

<h1 id="heading-django-ê°œë°œì„œë²„ë¡œ-ì‹¤í–‰">Django ê°œë°œì„œë²„ë¡œ ì‹¤í–‰</h1>
<ul>
  <li>ì—¬ê¸° ê¹Œì§€ í•˜ë©´ ê°œë°œ ì„œë²„ë¡œ ì‹¤í–‰ ê°€ëŠ¥</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python manage.py runser 0.0.0.0:8000
</code></pre></div></div>

<h1 id="heading-nginx--guniconêµ¬ë‹ˆì½˜-wsgi-ì„¤ì¹˜">nginx + gunicon(êµ¬ë‹ˆì½˜-wsgi) ì„¤ì¹˜</h1>

<h2 id="heading-gunicon-ì„¤ì¹˜">gunicon ì„¤ì¹˜</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>gunicorn
</code></pre></div></div>

<ul>
  <li>gunicon í…ŒìŠ¤íŠ¸
    <ul>
      <li>project root ê²½ë¡œì—ì„œ(django-board/) ì•„ë˜ ëª…ë ¹ì–´ ì‹¤í–‰</li>
    </ul>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gunicorn <span class="nt">--bind</span> 0:8000 config.wsgi:application
</code></pre></div></div>
<blockquote>
  <ul>
    <li>â€“bind: í¬íŠ¸</li>
    <li>config.wsgi:application : wsgiì™€ ì—°ê²°ëœ wsgi applicationì€ config/wsgi.py íŒŒì¼ì— ì„¤ì •ëœ applicationì´ë€ ì˜ë¯¸</li>
  </ul>
</blockquote>

<ul>
  <li>web browserì—ì„œ http://ip:8000 ìœ¼ë¡œ ì ‘ì† í…ŒìŠ¤íŠ¸
    <ul>
      <li>wsgiëŠ” ì¥ê³  ë™ì  ë¶€ë¶„ë§Œ ì‹¤í–‰í•˜ê³  ì •ì íŒŒì¼ì€ ì²˜ë¦¬ ì•ˆí•˜ê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ ë“±ì´ <strong>static ìš”ì†Œë“¤ì€ ì•ˆë‚˜ì˜¨ë‹¤.</strong>
        <h2 id="heading-gunicon-ì„-port-ëŒ€ì‹ -unix-socketì„-ì´ìš©">Gunicon ì„ port ëŒ€ì‹  unix socketì„ ì´ìš©</h2>
      </li>
    </ul>
  </li>
  <li>Gunicornì€ nginx ì™€ ì—°ê²°í•  ê²ƒì´ë¯€ë¡œ ì†ë„ê°€ ë”ë¹ ë¥¸ ì†Œì¼“ì—°ë™ì„ í•œë‹¤.</li>
  <li>ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì‹¤í–‰</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gunicorn <span class="nt">--bind</span> unix:/tmp/gunicorn.sock config.wsgi:application
	- <span class="nb">bind </span>ì˜µì…˜ë¶€ë¶„ì´ ë°”ë€œ
	- unix ì†Œì¼“ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ gunicon ì„œë²„ë¥¼ ë‹¨ë…ì„œë²„ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤. nginxì™€ ì—°ê²°í•´ì„œ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•˜ê²Œ í•œë‹¤.
	- ì—¬ê¸°ì„  ë˜ëŠ”ì§€ë§Œ í™•ì¸í•˜ì. 
</code></pre></div></div>

<ul>
  <li>Guniconì„ ë¦¬ëˆ…ìŠ¤ serviceë¡œ ë“±ë¡
    <ul>
      <li>ì„œë²„ ì‹œì‘í•  ë•Œ guniconì„ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ serviceë¡œ ë“±ë¡í•œë‹¤.</li>
      <li>ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ë ¤ë©´ í™˜ê²½ë³€ìˆ˜íŒŒì¼ê³¼ ì„œë¹„ìŠ¤ íŒŒì¼ì„ ì‘ì„±í•´ì•¼í•œë‹¤.</li>
      <li>í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ë“±ë¡
        <ul>
          <li>í™˜ê²½ë³€ìˆ˜ì— DJANGO_SETTINGS_MODULE í™˜ê²½ë³€ìˆ˜ ë“±ë¡í•´ì•¼í•¨.</li>
          <li>íŠ¹ì • ê²½ë¡œì— í™˜ê²½ì„¤ì •íŒŒì¼ì„ ì‘ì„±í•  íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒì„ ì‘ì„±í•œë‹¤.(ex:django-board.env)
            <ul>
              <li>ex) /home/ubuntu/project/django-board.env
                <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>config.settings
</code></pre></div>                </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„± ë° ì‘ì„±
        <ul>
          <li>/etc/systemd/system ë””ë ‰í† ë¦¬ì— ì„œë¹„ìŠ¤ ì„¤ì •íŒŒì¼ ìƒì„±
            <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">cd</span> /etc/systemd/system
  <span class="nb">sudo </span>vi django-board.service
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>ë‹¤ìŒ ë‚´ìš©ì„ ë„£ëŠ”ë‹¤.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [Unit]
  Description=gunicorn daemon
  After=network.target

  [Service]
  User=ubuntu
  Group=www-data
  WorkingDirectory=[í”„ë¡œì íŠ¸ ê²½ë¡œ]
  ExecStart=[gunicorn ì„¤ì¹˜ ê²½ë¡œ] --workers 3 --bind 0.0.0.0:8000 [ì¥ê³ ì•±ì„¤ì •íŒ¨í‚¤ì§€ëª…].wsgi:application

  [Install]
  WantedBy=multi-user.target
</code></pre></div>    </div>
    <ul>
      <li>ì˜ˆ)</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [Unit]
  Description=gunicorn daemon
  After=network.target

  [Service]
  User=ubuntu
  Group=ubuntu
  WorkingDirectory=/home/ubuntu/project/django-board
  EnvironmentFile=/home/ubuntu/project/django-board.env
  ExecStart=/home/ubuntu/project/venv/bin/gunicorn --workers 2 --bind unix:/tmp/gunicorn.sock config.wsgi:application

  [Install]
  WantedBy=multi-user.target
</code></pre></div>    </div>
    <ul>
      <li>WorkingDirectory: ì¥ê³  í”„ë¡œì íŠ¸ ê²½ë¡œ</li>
      <li>EnvironmentFile: í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ê²½ë¡œ</li>
      <li>ExecStart: gunicon ì‹¤í–‰ í”„ë¡œê·¸ë¨(ìœˆë„ìš°ë¼ë©´ exe) - ê°€ìƒí™˜ê²½/bin ì•„ë˜ ìˆë‹¤.
        <ul>
          <li>â€“workers : í”„ë¡œì„¸ìŠ¤ ëª‡ê°œ ì‚¬ìš©í•˜ëŠ”ì§€.</li>
          <li>ExecStartì—ëŠ” gunicorn ëª¨ë“ˆì´ ì„¤ì¹˜ëœ ê²½ë¡œë¥¼ ì§€ì •í•œë‹¤.</li>
        </ul>
      </li>
      <li>ì„œë¹„ìŠ¤ ë“±ë¡
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start django-board.service    <span class="c">#ì„œë¹„ìŠ¤ ì‹œì‘</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>django-board.service   <span class="c">#ë“±ë¡ </span>
<span class="nb">sudo </span>systemctl status django-board   	     <span class="c">#ìƒíƒœí™•ì¸</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h1 id="heading-nginx-ì„¤ì¹˜-ë°-ì„¤ì •">Nginx ì„¤ì¹˜ ë° ì„¤ì •</h1>

<h2 id="heading-ì„¤ì¹˜">ì„¤ì¹˜</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install nginx
</code></pre></div></div>

<h2 id="heading-ì„¤ì •">ì„¤ì •</h2>
<ul>
  <li>/etc/nginx/sites-available (Nginx ì„¤ì •íŒŒì¼ë“¤ ëª¨ì•„ë…¼ dir) ë””ë ‰í† ë¦¬ë¡œ ì´ë™
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /etc/nginx/sites-available
</code></pre></div>    </div>
  </li>
  <li>ì„¤ì •íŒŒì¼ì„ ìƒì„±í•œ ë’¤ ì•„ë˜ ë‚´ìš©ì„ ë„£ëŠ”ë‹¤.
    <ul>
      <li>sudo vi íŒŒì¼ëª… (sudo vi django-board)</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server {
        listen 80;
        server_name {ì ‘ì†í•  IPì£¼ì†Œ-ec2 public ipì£¼ì†Œ};

        # location = /favicon.ico { access_log off; log_not_found off; }

        location /static {
                alias {ì¥ê³ í”„ë¡œì íŠ¸ static ê²½ë¡œ};
        }
		
		location /media {
                alias {ì¥ê³ í”„ë¡œì íŠ¸ media ê²½ë¡œ};
        }
		
        location / {
                include proxy_params;
                proxy_pass http://unix:/tmp/gunicorn.sock;
        }
}
</code></pre></div></div>
<blockquote>
  <ul>
    <li>location /static, location /media
      <ul>
        <li>url/static ë˜ëŠ” url/media urlê²½ë¡œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì€ Nginxê°€ ì§€ì •í•œ ê²½ë¡œì˜ íŒŒì¼ì„ ì½ì–´ì„œ ì²˜ë¦¬í•œë‹¤. ì¥ê³ í”„ë¡œì íŠ¸ static íŒŒì¼ ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•œë‹¤.</li>
      </ul>
    </li>
    <li>location /
      <ul>
        <li>/static ì´ì™¸ì˜ ëª¨ë“  ìš”ì²­ì€ gunicornìœ¼ë¡œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •í•œë‹¤.</li>
        <li>prox_passëŠ” ë™ì  ìš”ì²­ì´ ë°œìƒí•˜ë©´ ê·¸ ìš”ì²­ì„ guniconì˜ ìœ ë‹‰ìŠ¤ ì†Œì¼“ìœ¼ë¡œ ë³´ë‚´ë€ ì„¤ì •.</li>
      </ul>
    </li>
  </ul>
</blockquote>

<ul>
  <li>ì˜ˆ
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server {
      listen 80;
      server_name 3.36.62.94;

      location /static {
          alias /home/ubuntu/project/django-board/static;
      }

      location /media {
          alias /home/ubuntu/project/django-board/media;
      }
      location / {
          include proxy_params;
          proxy_pass http://unix:/tmp/gunicorn.sock;
      }
}
</code></pre></div>    </div>
    <p>â€“ ì£¼ì˜</p>
    <ul>
      <li>static, media ê²½ë¡œ ì— /ë¡œ ëë‚˜ë©´ ì•ˆëœë‹¤. (location /media/ /ë¡œ ëë‚˜ë©´ì•ˆë¨. location /media )</li>
      <li>ëì— ";" ë¹¼ë¨¹ìœ¼ë©´ ì•ˆëœë‹¤.</li>
    </ul>
  </li>
  <li>/etc/nginx/site-enabled ì— symbolic ë§í¬ë¥¼ ì¶”ê°€í•œë‹¤. (defaultëŠ” ì œê±°)
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /etc/nginx/sites-enabled
<span class="nb">sudo rm </span>default
<span class="nb">sudo ln</span> <span class="nt">-s</span> /etc/nginx/sites-available/íŒŒì¼ëª… 
<span class="nb">sudo ln</span> <span class="nt">-s</span> /etc/nginx/sites-available/django-board
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="heading-nginx-ì„œë¹„ìŠ¤-ë¦¬ìŠ¤íƒ€íŠ¸-ì„œë¹„ìŠ¤ë¡œ-ë“±ë¡ë˜-ìë™ìœ¼ë¡œ-ì‹¤í–‰ë¨">Nginx ì„œë¹„ìŠ¤ ë¦¬ìŠ¤íƒ€íŠ¸ (ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ë˜ ìë™ìœ¼ë¡œ ì‹¤í–‰ë¨)</h2>
<p>sudo systemctl restart nginx</p>

<ul>
  <li>ì›¹ë¸Œë¼ìš°ì €ì—ì„œ http://ip ë¡œ ìš”ì²­í•œë‹¤.</li>
</ul>

<h1 id="heading-ì°¸ê³ ">ì°¸ê³ </h1>
<ul>
  <li>ì‹¤í–‰ì¤‘ì¸ ì„œë¹„ìŠ¤ í™•ì¸ 
service â€“status-all</li>
</ul>
:ET